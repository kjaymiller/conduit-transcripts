{% extends "layout.html" %}

{% block title %}Statistics - Conduit Transcripts{% endblock %}

{% block content %}
<div style="max-width: 900px; margin: 0 auto;">
    <h1>Transcript Statistics</h1>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
        <div class="card" style="text-align: center; margin-bottom: 0;">
            <h2 style="font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 0.5rem; font-weight: 500;">Total Episodes</h2>
            <div id="stats-episodes" style="font-size: 2.5rem; font-weight: 700; color: var(--primary);">...</div>
        </div>
        
        <div class="card" style="text-align: center; margin-bottom: 0;">
            <h2 style="font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 0.5rem; font-weight: 500;">Searchable Segments</h2>
            <div id="stats-chunks" style="font-size: 2.5rem; font-weight: 700; color: var(--primary);">...</div>
        </div>
    </div>
    
    <div class="card">
        <h2>About the Data</h2>
        <p style="margin-top: 1rem; color: var(--text-secondary);">
            The Conduit Transcripts project indexes episodes from the Conduit podcast. 
            The transcripts are chunked into smaller segments for vector search, allowing for semantic understanding of the content.
        </p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    async function loadStats() {
        try {
            const res = await fetch('/api/stats');
            const data = await res.json();
            
            document.getElementById('stats-episodes').textContent = data.total_episodes.toLocaleString();
            document.getElementById('stats-chunks').textContent = data.total_chunks.toLocaleString();
        } catch (e) {
            console.error('Failed to load stats:', e);
        }
    }
    
    loadStats();
</script>
{% endblock %}
